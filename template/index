<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Visualização de Pontos de Interesse</title>
</head>
<body>
    <div id = "map" style = "width: 900px; height: 580px"></div>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        var latitude = -23.5505;
        var longitude = -46.6333;
        var zoom = 5;

        var map = L.map('map').setView([latitude, longitude], zoom);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
            maxZoom: 18
        }).addTo(map);

        function onMapClick(e) {
    var clickedLatLng = e.latlng;
    var latitude = clickedLatLng.lat;
    var longitude = clickedLatLng.lng;

    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/add_point', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
            console.log(xhr.responseText);
        }
    };
    xhr.send('latitude=' + latitude + '&longitude=' + longitude);

    var clickedMarker = L.marker(clickedLatLng).addTo(map);
}


        map.on('click', onMapClick);
    </script>
</body>
</html>
